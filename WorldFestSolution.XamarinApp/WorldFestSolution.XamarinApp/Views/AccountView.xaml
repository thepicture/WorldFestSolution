<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:WorldFestSolution.XamarinApp.ViewModels"
             xmlns:models="clr-namespace:WorldFestSolution.XamarinApp.Models"
             xmlns:material="clr-namespace:XF.Material.Forms.UI;assembly=XF.Material"
             x:DataType="viewmodels:AccountViewModel"
             x:Class="WorldFestSolution.XamarinApp.Views.AccountView"
             Title="Аккаунт">
    <ContentPage.BindingContext>
        <viewmodels:AccountViewModel />
    </ContentPage.BindingContext>
    <Grid RowDefinitions="*,1*">
        <Frame Padding="0">
            <Image Source="{Binding User.ImageSource}"
                   Aspect="AspectFill" />
        </Frame>
        <Grid Opacity=".5">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0"
                                     EndPoint="0,1">
                    <GradientStop Offset="0.5" />
                    <GradientStop Offset="1"
                                  Color="Black" />
                </LinearGradientBrush>
            </Grid.Background>
        </Grid>
        <StackLayout Grid.Row="1"
                     VerticalOptions="Center"
                     Margin="0,0,0,40">
            <Label Text="{Binding Path=User.Login,
                                  StringFormat='{}Логин: {0}'}"
                   FontSize="Large"
                   FontAttributes="Bold"
                   HorizontalTextAlignment="Center" />
            <Label FontSize="Medium"
                   HorizontalTextAlignment="Center">
                <Label.FormattedText>
                    <FormattedString>
                        <FormattedString.Spans>
                            <Span Text="{Binding User.LastName}" />
                            <Span Text=" " />
                            <Span Text="{Binding User.FirstName}" />
                            <Span Text=" " />
                            <Span Text="{Binding User.Patronymic}" />
                        </FormattedString.Spans>
                    </FormattedString>
                </Label.FormattedText>
            </Label>
            <Label Text="{Binding Source={Static models:Identity.Role},
                   StringFormat='{}Вы {0}'}"
                   FontSize="Medium"
                   HorizontalTextAlignment="Center" />
            <Label Text="{Binding Path=User.Rating,
                                  StringFormat='{}Ваш рейтинг: {0}'}"
                   FontSize="Medium"
                   HorizontalTextAlignment="Center">
                <Label.Triggers>
                    <DataTrigger TargetType="Label"
                                 Binding="{Binding User.Rating}"
                                 Value="0">
                        <Setter Property="Text"
                                Value="Вас пока не оценивали" />
                    </DataTrigger>
                </Label.Triggers>
            </Label>
        </StackLayout>
        <material:MaterialButton Text="Разлогиниться"
                                 Command="{Binding LogoutCommand}"
                                 Style="{StaticResource BackgroundButton}"
                                 VerticalOptions="EndAndExpand"
                                 Grid.Row="1" />
    </Grid>
</ContentPage>